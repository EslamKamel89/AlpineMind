<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reactivity-demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .skeleton {
        position: relative;
        overflow: hidden;
        background: rgb(229 231 235);
      }
      .skeleton::after {
        content: "";
        position: absolute;
        inset: 0;
        transform: translateX(-100%);
        background: linear-gradient(
          90deg,
          rgba(229, 231, 235, 0) 0%,
          rgba(156, 163, 175, 0.25) 50%,
          rgba(229, 231, 235, 0) 100%
        );
        animation: shimmer 1.6s infinite;
      }
      @keyframes shimmer {
        100% {
          transform: translateX(100%);
        }
      }
      /* Hide elements meant to be initialized later (e.g., dialog) */
      .hidden-important {
        display: none !important;
      }
    </style>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>
  <body class="min-h-screen bg-gray-50 text-gray-900">
    <header
      class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-gray-200"
    >
      <div
        class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between"
      >
        <div class="flex items-center gap-2">
          <div class="h-8 w-8 rounded-lg bg-indigo-600"></div>
          <span class="font-semibold">Alpine Advanced â€” UI Kit</span>
        </div>
        <nav class="hidden md:flex items-center gap-6 text-sm">
          <a href="#forms" class="hover:text-indigo-600">Forms</a>
          <a href="#navigation" class="hover:text-indigo-600">Navigation</a>
          <a href="#feedback" class="hover:text-indigo-600">Feedback</a>
          <a href="#data" class="hover:text-indigo-600">Data</a>
          <a href="#overlays" class="hover:text-indigo-600">Overlays</a>
        </nav>
        <div class="flex items-center gap-2">
          <button
            class="inline-flex items-center gap-2 rounded-lg border border-gray-200 px-3 py-1.5 text-sm hover:bg-gray-100"
          >
            <span class="i">ðŸŒ™</span><span>Theme</span>
          </button>
          <img
            alt="avatar"
            class="h-8 w-8 rounded-full ring-2 ring-white"
            src="https://avatars.githubusercontent.com/u/9919?s=80&v=4"
          />
        </div>
      </div>
    </header>
    <div
      class="mx-auto max-w-7xl grid grid-cols-1 lg:grid-cols-[16rem,1fr] gap-6 px-4 sm:px-6 lg:px-8 mt-6"
    >
      <!-- Sidebar -->
      <aside class="bg-white border border-gray-200 rounded-xl p-4 h-fit">
        <h2 class="text-sm font-semibold text-gray-700 mb-3">Components</h2>
        <ul class="space-y-1 text-sm">
          <li>
            <a class="block rounded px-2 py-1 hover:bg-gray-100" href="#buttons"
              >Buttons</a
            >
          </li>
          <li>
            <a class="block rounded px-2 py-1 hover:bg-gray-100" href="#forms"
              >Forms</a
            >
          </li>
          <li>
            <a class="block rounded px-2 py-1 hover:bg-gray-100" href="#tabs"
              >Tabs</a
            >
          </li>
          <li>
            <a
              class="block rounded px-2 py-1 hover:bg-gray-100"
              href="#dropdown"
              >Dropdown</a
            >
          </li>
          <li>
            <a class="block rounded px-2 py-1 hover:bg-gray-100" href="#cards"
              >Cards</a
            >
          </li>
          <li>
            <a class="block rounded px-2 py-1 hover:bg-gray-100" href="#table"
              >Table</a
            >
          </li>
          <li>
            <a class="block rounded px-2 py-1 hover:bg-gray-100" href="#alerts"
              >Alerts</a
            >
          </li>
          <li>
            <a class="block rounded px-2 py-1 hover:bg-gray-100" href="#toasts"
              >Toast Area</a
            >
          </li>
          <li>
            <a
              class="block rounded px-2 py-1 hover:bg-gray-100"
              href="#skeletons"
              >Skeletons</a
            >
          </li>
          <li>
            <a
              class="block rounded px-2 py-1 hover:bg-gray-100"
              href="#accordions"
              >Accordions</a
            >
          </li>
          <li>
            <a
              class="block rounded px-2 py-1 hover:bg-gray-100"
              href="#breadcrumbs"
              >Breadcrumbs</a
            >
          </li>
          <li>
            <a class="block rounded px-2 py-1 hover:bg-gray-100" href="#modals"
              >Modal (static)</a
            >
          </li>
          <li>
            <a class="block rounded px-2 py-1 hover:bg-gray-100" href="#drawers"
              >Drawer (static)</a
            >
          </li>
        </ul>
      </aside>
      <main class="space-y-12 pb-20">
        <section id="rating-component" class="scroll-mt-24">
          <h2 class="text-lg font-semibold mb-4">Custom Component: Rating</h2>

          <!-- Parent component controlling the rating value -->
          <div
            x-data="{ rating: 3 }"
            class="bg-white border border-gray-200 rounded-xl p-4 space-y-4"
          >
            <p class="text-sm">Parent value: <span x-text="rating"></span></p>

            <!-- This will become the child component -->
            <div class="text-sm text-gray-600">
              <div
                x-data="rating({max:5 , readonly:false})"
                class="flex items-center gap-1"
                x-modelable="value"
                x-model="rating"
                role="radiogroup"
                aria-label="Rating"
              >
                <template x-for="star in max" :key="star">
                  <button
                    type="button"
                    class="text-2xl leading-none rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"
                    :class="isActive(star)? 'text-yellow-500':'text-gray-300'"
                    @click="set(star)"
                    @keydown.enter.prevent="set(star)"
                    @keydown.space.prevent="set(star)"
                    @keydown.arrow-right.prevent="inc()"
                    @keydown.arrow-up.prevent="inc()"
                    @keydown.arrow-left.prevent="dec()"
                    @keydown.arrow-down.prevent="dec()"
                  >
                    â˜…
                  </button>
                </template>
                <div class="ml-3 flex items-center gap-2 text-sm">
                  <button
                    type="button"
                    class="px-2 py-1 rounded border"
                    @click="dec()"
                  >
                    -
                  </button>
                  <button
                    type="button"
                    class="px-2 py-1 rounded border"
                    @click="inc()"
                  >
                    +
                  </button>
                  <button
                    type="button"
                    class="px-2 py-1 rounded border"
                    @click="clear()"
                  >
                    Clear
                  </button>
                  <span class="text-gray-500"
                    >= <span x-text="value"></span
                  ></span>
                </div>
              </div>
            </div>
            <div class="flex items-center gap-2 text-sm">
              <button class="px-2 py-1 rounded border" @click="rating = 1">
                Set to 1 (parent)
              </button>
              <button class="px-2 py-1 rounded border" @click="rating = 5">
                Set to 5 (parent)
              </button>
            </div>
          </div>
        </section>
      </main>
    </div>

    <footer class="mt-16 border-t border-gray-200">
      <div
        class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8 text-sm text-gray-500"
      >
        Â© 2025 Alpine Advanced Course â€” Tailwind-only templates
      </div>
    </footer>
    <script>
      document.addEventListener("alpine:init", () => {
        Alpine.data("rating", (opts = {}) => {
          const max = Number.isFinite(opts.max) ? opts.max : 5;
          const readonly = !!opts.readonly;
          const initial = Number.isFinite(opts.initial) ? opts.initial : 0;
          return {
            value: initial,
            max,
            readonly,
            isActive(star) {
              return this.value >= star;
            },
            set(value) {
              if (!this.readonly) this.value = value;
            },
            clear() {
              if (!this.readonly) this.value = 0;
            },
            inc() {
              if (!this.readonly && this.value < this.max) this.value++;
            },
            dec() {
              if (!this.readonly && this.value > 0) this.value--;
            },
          };
        });
      });
    </script>
  </body>
</html>
